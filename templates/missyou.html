<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>I Miss You</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<style>
		body {
			background-color: #121212;
			color: #ffffff;
			font-family: 'Segoe UI', sans-serif;
		}

		.heart-ring {
			position: absolute;
			border: 2px solid red;
			border-radius: 50%;
			opacity: 0.5;
			animation: fadeout 30s linear forwards;
		}
		
		@keyframes fadeout {
			0% { opacity: 0.5; }
			100% { opacity: 0; }
		}

		#heartContainer {
			position: relative;
			width: 150px;
			height: 150px;
			margin: 20px auto;
		}

		#heartButton {
			width: 60px;
			height: 60px;
			background-color: red;
			clip-path: path("M30 0 C80 0, 80 60, 30 90 C-20 60, -20 0, 30 0 Z");
			position: absolute;
			top: 45px;
			left: 45px;
			cursor: pointer;
		}

		.section-title {
			margin-top: 30px;
			margin-bottom: 10px;
			font-weight: bold;
		}
	</style>
</head>
<body>
	<div class="container text-center py-4">
		<h2>❤️ I Miss You</h2>

		<!-- Override Toggle -->
		<div class="form-check form-switch my-4">
			<input class="form-check-input" type="checkbox" id="overrideSwitch" onchange="toggleOverride()">
			<label class="form-check-label" for="overrideSwitch">Use Override Messages</label>
		</div>

		<!-- Heart Tap -->
		<div id="heartContainer">
			<div id="heartButton" onclick="sendHeart()"></div>
		</div>
		<p class="mt-3">❤️ Hearts Sent: <span id="heartCount">0</span></p>
	</div>

	<script>
		let heartCount = 0;
		const maxRings = 20;

		function sendHeart() {
			heartCount++;
			document.getElementById("heartCount").innerText = Math.floor(heartCount / 10);

			if (Math.floor(heartCount / 10) <= maxRings) {
				const ring = document.createElement("div");
				ring.className = "heart-ring";
				const radius = 30 + (Math.floor(heartCount / 10) * 20);
				ring.style.width = ring.style.height = `${radius}px`;
				ring.style.top = `${75 - radius / 2}px`;
				ring.style.left = `${75 - radius / 2}px`;
				ring.style.opacity = "0.5";
				document.getElementById("heartContainer").appendChild(ring);
			}

			// Optional backend log
			fetch("/add_heart", { method: "POST" });
		}

		function toggleOverride() {
			const isChecked = document.getElementById("overrideSwitch").checked;
			fetch("/toggle_override", {
				method: "POST",
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ override: isChecked })
			});
		}
	</script>
</body>
</html>
