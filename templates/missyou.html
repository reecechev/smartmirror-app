<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>I Miss You</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<style>
		body {
			background-color: #121212;
			color: #ffffff;
			font-family: 'Segoe UI', sans-serif;
		}

		.heart-ring {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			fill: none;
			stroke: red;
			stroke-width: 2px;
			opacity: 0.5;
			pointer-events: none;
			animation: fadeout 30s linear forwards;
		}
		
		@keyframes fadeout {
			0% { opacity: 0.5; }
			100% { opacity: 0; }
		}

		#heartContainer {
			position: relative;
			width: 150px;
			height: 150px;
			margin: 20px auto;
		}

		#heartButton {
			width: 60px;
			height: 60px;
			background-color: red;
			clip-path: path("M30 0 C80 0, 80 60, 30 90 C-20 60, -20 0, 30 0 Z");
			position: absolute;
			top: 45px;
			left: 45px;
			cursor: pointer;
		}

		.section-title {
			margin-top: 30px;
			margin-bottom: 10px;
			font-weight: bold;
		}
	</style>
</head>
<body style="background-color: #121212; color: white; font-family: Arial, sans-serif;">
	<div style="text-align: center; padding: 20px;">
		<h2 style="color: white;">❤️ I Miss You</h2>

		<!-- Override Toggle -->
		<label style="display: block; margin: 10px auto;">
			<input type="checkbox" id="overrideToggle" onchange="toggleOverride()" />
			<span style="margin-left: 8px;">Use Override Messages</span>
		</label>

		<div id="heartContainer">
			<div id="heartButton" onclick="sendHeart()"></div>
		</div>

		<div style="margin-top: 10px;">
			❤️ Hearts Sent: <span id="heartCount">0</span>
		</div>
	</div>

	<script>
		let heartCount = 0;

		function sendHeart() {
			heartCount++;
			document.getElementById("heartCount").innerText = heartCount;

			// Add ring every 10 clicks
			if (heartCount % 10 === 0) {
				addRing(heartCount / 10);
			}
		}

		function addRing(ringNum) {
			const ring = document.createElementNS("http://www.w3.org/2000/svg", "svg");
			const path = document.createElementNS("http://www.w3.org/2000/svg", "path");

			const scale = 1 + ringNum * 0.2;

			ring.setAttribute("viewBox", "0 0 100 100");
			ring.setAttribute("class", "heart-outline");
			ring.style.transform = `scale(${scale})`;
			ring.style.transformOrigin = "center";

			path.setAttribute("d", "M30 0 C50 0, 80 60, 30 90 C-20 60, -0 0, 30 0 Z");
			ring.appendChild(path);

			document.getElementById("heartContainer").appendChild(ring);

			// Remove after 30 minutes
			setTimeout(() => {
				ring.remove();
			}, 1800000);
		}

		function toggleOverride() {
			const override = document.getElementById("overrideToggle").checked;
			fetch("/override-toggle", {
				method: "POST",
				headers: {
					"Content-Type": "application/json"
				},
				body: JSON.stringify({ use_override: override })
			});
		}
	</script>
</body>
</html>
