<!DOCTYPE html>
<html>
<head>
	<title>I Miss You</title>
</head>
<body>
<div class="container mt-5">
	<h2>I Miss You</h2>

	<!-- Override Mode Switch -->
	<div class="form-check form-switch mb-4">
		<input class="form-check-input" type="checkbox" id="overrideSwitch" onchange="toggleOverride()">
		<label class="form-check-label" for="overrideSwitch">Use Override Messages</label>
	</div>
	
	<!-- Heart Button Section -->
	<div class="text-center">
		<div id="heartContainer" style="position: relative; width: 150px; height: 150px; margin: auto;">
			<div id="heartButton" onclick="sendHeart()" style="width: 60px; height: 60px; background: red; clip-path: path('M30 0 C30 0, 0 30, 30 60 C60 30, 30 0, 30 0'); position: absolute; top: 45px; left: 45px;"></div>
		</div>
		<p class="mt-3" id="heartCount">❤️ Hearts Sent: 0</p>
	</div>
</div>

<script>
	let heartCount = 0;
	let maxRings = 20;

	function sendHeart() {
		heartCount++;
		document.getElementById('heartCount').innerText = `❤️ Hearts Sent: ${Math.floor(heartCount / 10)}`;

		if (Math.floor(heartCount / 10) <= maxRings) {
			const ring = document.createElement('div');
			ring.className = 'heart-ring';
			ring.style.position = 'absolute';
			ring.style.border = '2px solid red';
			ring.style.borderRadius = '50%';
			ring.style.top = `${30 - heartCount}px`;
			ring.style.left = `${30 - heartCount}px`;
			ring.style.width = `${60 + heartCount * 2}px`;
			ring.style.height = `${60 + heartCount * 2}px`;
			ring.style.opacity = 0.6;
			document.getElementById('heartContainer').appendChild(ring);

			// Send to backend (optional)
			fetch('/add_heart', { method: 'POST' });
		}
	}

	function toggleOverride() {
		const isChecked = document.getElementById('overrideSwitch').checked;
		fetch('/toggle_override', {
			method: 'POST',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({ override: isChecked })
		});
	}
</script>
</body>
</html>
